function apirequest(traincount){
    
    var depatures = [{"tripId":"1|253024|4|80|19042022","stop":{"type":"stop","id":"8002347","name":"Grafing Bahnhof","location":{"type":"location","id":"8002347","latitude":48.043424,"longitude":11.940156},"products":{"nationalExpress":false,"national":false,"regionalExp":false,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}},"when":"2022-04-19T18:31:00+02:00","plannedWhen":"2022-04-19T18:31:00+02:00","delay":null,"platform":null,"plannedPlatform":null,"direction":"Ebersberg(Oberbay)","provenance":null,"line":{"type":"line","id":"3-b7-sev-1285801-5355333","fahrtNr":"95653","name":"Bus SEV","public":true,"adminCode":"B7____","productName":"Bus","mode":"train","product":"regional","operator":{"type":"operator","id":"nahreisezug","name":"Nahreisezug"}},"remarks":[],"origin":null,"destination":{"type":"stop","id":"8001634","name":"Ebersberg(Oberbay)","location":{"type":"location","id":"8001634","latitude":48.074886,"longitude":11.970494},"products":{"nationalExpress":false,"national":false,"regionalExp":false,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}}},{"tripId":"1|251033|3|80|19042022","stop":{"type":"stop","id":"8002347","name":"Grafing Bahnhof","location":{"type":"location","id":"8002347","latitude":48.043424,"longitude":11.940156},"products":{"nationalExpress":false,"national":false,"regionalExp":false,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}},"when":"2022-04-19T18:34:00+02:00","plannedWhen":"2022-04-19T18:34:00+02:00","delay":0,"platform":"1","plannedPlatform":"1","direction":"Tutzing","provenance":null,"line":{"type":"line","id":"4-800725-6","fahrtNr":"6696","name":"S 6","public":true,"adminCode":"800725","productName":"S","mode":"train","product":"suburban","operator":{"type":"operator","id":"db-regio-ag-bayern","name":"DB Regio AG Bayern"}},"remarks":[],"origin":null,"destination":{"type":"stop","id":"8005927","name":"Tutzing","location":{"type":"location","id":"8005927","latitude":47.906815,"longitude":11.272653},"products":{"nationalExpress":true,"national":false,"regionalExp":false,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}},"currentTripPosition":{"type":"location","latitude":48.043352,"longitude":11.939958}},{"tripId":"1|253096|4|80|19042022","stop":{"type":"stop","id":"8002347","name":"Grafing Bahnhof","location":{"type":"location","id":"8002347","latitude":48.043424,"longitude":11.940156},"products":{"nationalExpress":false,"national":false,"regionalExp":false,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}},"when":"2022-04-19T18:35:00+02:00","plannedWhen":"2022-04-19T18:35:00+02:00","delay":null,"platform":null,"plannedPlatform":null,"direction":"Zorneding","provenance":null,"line":{"type":"line","id":"3-b7-sev-1285801-5355333","fahrtNr":"97646","name":"Bus SEV","public":true,"adminCode":"B7____","productName":"Bus","mode":"train","product":"regional","operator":{"type":"operator","id":"nahreisezug","name":"Nahreisezug"}},"remarks":[],"origin":null,"destination":{"type":"station","id":"8006671","name":"Zorneding","location":{"type":"location","id":"8006671","latitude":48.089395,"longitude":11.833004},"products":{"nationalExpress":false,"national":false,"regionalExp":false,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}}},{"tripId":"1|1484638|0|80|19042022","stop":{"type":"stop","id":"624538","name":"Bahnhof, Grafing b. München","location":{"type":"location","id":"624538","latitude":48.043739,"longitude":11.940677},"products":{"nationalExpress":false,"national":false,"regionalExp":false,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false},"station":{"type":"station","id":"8002347","name":"Grafing Bahnhof","location":{"type":"location","id":"8002347","latitude":48.043424,"longitude":11.940156},"products":{"nationalExpress":false,"national":false,"regionalExp":false,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}}},"when":"2022-04-19T18:42:00+02:00","plannedWhen":"2022-04-19T18:42:00+02:00","delay":null,"platform":null,"plannedPlatform":null,"direction":"Glonn, Bahnhofsplatz","provenance":null,"line":{"type":"line","id":"5-mvvrbu-440","fahrtNr":"13737","name":"Bus 440","public":true,"adminCode":"mvvRBU","productName":"Bus","mode":"bus","product":"bus","operator":{"type":"operator","id":"nahreisezug","name":"Nahreisezug"}},"remarks":[],"origin":null,"destination":{"type":"stop","id":"621239","name":"Bahnhofsplatz, Glonn","location":{"type":"location","id":"621239","latitude":47.988913,"longitude":11.8647},"products":{"nationalExpress":false,"national":false,"regionalExp":false,"regional":false,"suburban":false,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}},"currentTripPosition":{"type":"location","latitude":48.032646,"longitude":11.87778}},{"tripId":"1|389212|0|80|19042022","stop":{"type":"stop","id":"8002347","name":"Grafing Bahnhof","location":{"type":"location","id":"8002347","latitude":48.043424,"longitude":11.940156},"products":{"nationalExpress":false,"national":false,"regionalExp":false,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}},"when":"2022-04-19T18:49:00+02:00","plannedWhen":"2022-04-19T18:46:00+02:00","delay":180,"platform":"5","plannedPlatform":"5","direction":"Kufstein","provenance":null,"line":{"type":"line","id":"brb-rb54","fahrtNr":"79085","name":"BRB RB54","public":true,"adminCode":"M8____","productName":"BRB","mode":"train","product":"regional","operator":{"type":"operator","id":"bayerische-regiobahn","name":"Bayerische Regiobahn"},"additionalName":"BRB RB54"},"remarks":[],"origin":null,"destination":{"type":"stop","id":"8100001","name":"Kufstein","location":{"type":"location","id":"8100001","latitude":47.583509,"longitude":12.165201},"products":{"nationalExpress":true,"national":true,"regionalExp":true,"regional":true,"suburban":true,"bus":true,"ferry":false,"subway":false,"tram":false,"taxi":false}},"currentTripPosition":{"type":"location","latitude":48.13853,"longitude":11.569306}}]
    console.log("api request is going to start with " + traincount + " connections");

    //Prüfen, ob der Halt ein Zug ist
    for (let i = 0; i <= traincount; i++) {
        console.log("CONCHECK: checking connection " + i + " ...")
        if (depatures[i].line.productName == "Bus") {
            //nichts tun
            console.log("CONCHECK: connection " + i + " skipped: bus connection.");
        }
        else {
            console.log("CONCHECK: connection " + i + " taken: not a bus connection. (connection:"+ depatures[i].line.productName + ")");
            takenconnections.push(i);
        }

    }

    //Jetzt werden die Daten aus jeder Zugverbindung extrahiert
    var firstcon = takenconnections[0];
    var lastcon = takenconnections[takenconnections.length-1];
    console.log("GETTING: Starting to get variables. Firstcon: " + firstcon + " Lastcon: " + lastcon);
    
    

    for (let i = firstcon; i<=lastcon;i++) {
        if(takenconnections.includes(i) == true) {
            lineraw[i] = depatures[i].line.name;                        //Linie
            platform[i] = depatures[i].platform;                        //Gleis
            if(depatures[i].plannedPlatform != depatures[i].platform)   //Wenn das geplante Gleis nicht gleich dem stattfindenden Gleis ist,
                {platformchange[i]=true;}                               //so wird die Variable "platformchange" auf true gesetzt.
            
            let plannedtime1 = [];                                      //Zwischenspeicher für Fahrplanzeit in normalem Format
            plannedtime1[i] = new Date(depatures[i].plannedWhen);
            plannedtime[i] = plannedtime1[i].getTime() + 7200000;       //Jetzt in Unix-Format umgerechnet; +720k, weil Zeitzonenverschiebung (+2h)

            let time1 = [];                                             //Zwischenspeicher für Zeit in normalem Format
            time1[i] = new Date(depatures[i].when);                     
            time[i] = time1[i].getTime() + 7200000;                     //Jetzt in Unix-Format umgerechnet; +720k, weil Zeitzonenverschiebung (+2h)
            
            if(plannedtime[i] != time[i]) {                             //Prüfen, ob Verspätung vorliegt
                delayed[i] = true;                                      //Die Variable "delay" wird auf true gesetzt
                delay[i] = (time[i] - plannedtime[i]) / 60000;          //und die Verspätung in Minuten berechnet
            }
            
            console.log("GETTING: Index: " + i + ": LINE: " + lineraw[i] + " DELAY: " + delay[i]);
        }
    }

    /*Benötigte Variablen:
    -Linie (umgewandelt, das wird aber in einer anderen Funktion erledigt),
    -Ziel
    -Zeit (in Minuten umgewandelt)
    -Verspätung (in Minuten)
    -Gleis
    -evtl. Belegung*/
    
    
    /*var dest1 = depatures[0].direction;
    var time1 = depatures[0].when;
    var line1 = depatures[0].line.name;
    console.log("Ziel: " + dest1);
    console.log("Zeit: " + time1);
    console.log("Linie: " + line1)*/
}